<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
{namespace be = TYPO3\CMS\Backend\ViewHelpers} {namespace bu = TPO3\CMS\Beuser\ViewHelpers} {namespace core
=TYPO3\CMS\Core\ViewHelpers}

<f:layout name="Administration/Default"/>

<f:section name="content">

    <h1>E-Mail Log</h1>

    <f:if condition="{logs}">
        <div class="panel panel-default">
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>
                        <f:translate key="LLL:EXT:bw_email/Resources/Private/Language/locallang_db.xlf:tx_bwemail_domain_model_maillog.send_date"/>
                    </th>
                    <th>
                        <f:translate key="LLL:EXT:bw_email/Resources/Private/Language/locallang_db.xlf:tx_bwemail_domain_model_maillog.subject"/>
                    </th>
                    <th>
                        <f:translate key="LLL:EXT:bw_email/Resources/Private/Language/locallang_db.xlf:tx_bwemail_domain_model_maillog.recipient_address"/>
                    </th>
                    <th>
                        <f:translate key="LLL:EXT:bw_email/Resources/Private/Language/locallang_db.xlf:tx_bwemail_domain_model_maillog.recipient_name"/>
                    </th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <f:for each="{logs}" as="log">
                    <tr>
                        <td><f:link.action action="showLog" arguments="{log: log.uid}">{log.sendDate->f:format.date(format:'d.m.Y H:i')}</f:link.action></td>
                        <td><f:link.action action="showLog" arguments="{log: log.uid}">{log.subject}</f:link.action></td>
                        <td><f:link.action action="showLog" arguments="{log: log.uid}">{log.recipientAddress}</f:link.action></td>
                        <td><f:link.action action="showLog" arguments="{log: log.uid}">{log.recipientName}</f:link.action></td>
                        <td align="right">
                            <f:be.link route="ajax_email_preview" parameters="{id: log.uid}" class="btn btn-default preview"><i class="fa fa-search"
                                                                                     aria-hidden="true"></i> View E-Mail
                            </f:be.link>
                        </td>
                    </tr>
                </f:for>
                </tbody>
            </table>
        </div>
    </f:if>

    <f:if condition="!{logs}">
        <f:be.infobox title="No log entries" state="-1"></f:be.infobox>
    </f:if>

</f:section>

</html>
